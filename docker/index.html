
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Kevin Campos">
      
      
      
        <link rel="prev" href="../getting_started/">
      
      
        <link rel="next" href="../webserver/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Docker - Project Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dockerized-services" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Project Documentation" class="md-header__button md-logo" aria-label="Project Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Project Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Docker
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Project Documentation" class="md-nav__button md-logo" aria-label="Project Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Project Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Docker
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Docker
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dockerized-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Dockerized Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dockerized Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxy" class="md-nav__link">
    <span class="md-ellipsis">
      HAProxy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-servers" class="md-nav__link">
    <span class="md-ellipsis">
      Web Servers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nagios" class="md-nav__link">
    <span class="md-ellipsis">
      Nagios
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mkdocs" class="md-nav__link">
    <span class="md-ellipsis">
      MkDocs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network" class="md-nav__link">
    <span class="md-ellipsis">
      Network
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#challenges-faced" class="md-nav__link">
    <span class="md-ellipsis">
      Challenges Faced
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lessons-learned" class="md-nav__link">
    <span class="md-ellipsis">
      Lessons Learned
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Services
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../webserver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web Servers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loadbalancer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Load Balancer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nagios/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nagios
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../lessons_learned/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lessons Learned
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dockerized-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Dockerized Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dockerized Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxy" class="md-nav__link">
    <span class="md-ellipsis">
      HAProxy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-servers" class="md-nav__link">
    <span class="md-ellipsis">
      Web Servers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nagios" class="md-nav__link">
    <span class="md-ellipsis">
      Nagios
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mkdocs" class="md-nav__link">
    <span class="md-ellipsis">
      MkDocs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network" class="md-nav__link">
    <span class="md-ellipsis">
      Network
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#challenges-faced" class="md-nav__link">
    <span class="md-ellipsis">
      Challenges Faced
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lessons-learned" class="md-nav__link">
    <span class="md-ellipsis">
      Lessons Learned
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="dockerized-services">Dockerized Services</h1>
<p>This section explains the Dockerized architecture of the project, covering the configuration of various services, their interactions, and decisions made along the way. Below, you'll find detailed insights into the tools, technologies, and configurations used to build a robust and scalable Dockerized environment.</p>
<hr />
<h2 id="overview">Overview</h2>
<details class="info">
<summary>What You'll Learn</summary>
<p>By the end of this section, you will understand:</p>
<ul>
<li>How the project's services are containerized using Docker.</li>
<li>The purpose and configuration of each service, including HAProxy, web servers, and Nagios.</li>
<li>Key challenges faced during the setup and how they were overcome.</li>
<li>Lessons learned and future improvements for scaling and optimization.</li>
</ul>
</details>
<p>This project relies on Docker to create isolated and reproducible environments for running its services. The use of Docker Compose ensures seamless coordination and deployment.</p>
<hr />
<h2 id="dockerized-setup">Dockerized Setup</h2>
<p>The following services are defined in the <code>docker-compose.yml</code> file:</p>
<h3 id="haproxy">HAProxy</h3>
<ul>
<li><strong>Image</strong>: Built from the <code>Dockerfile.dev</code> in <code>./infrastructure/load_balancer</code>.</li>
<li><strong>Purpose</strong>: Acts as a load balancer to distribute traffic between the web servers.</li>
<li><strong>Ports</strong>: Maps the port range <code>60000-60001</code> to the host for testing purposes.</li>
<li><strong>Dependencies</strong>: Depends on <code>web-a</code> and <code>web-b</code> services to ensure they start first.</li>
</ul>
<h3 id="web-servers">Web Servers</h3>
<ul>
<li><strong>Web-A</strong>: A simple web server configured to respond with the message "Web Server: A".<ul>
<li><strong>Image</strong>: Built from <code>Dockerfile.dev</code> in <code>./infrastructure/web_server</code>.</li>
<li><strong>Environment</strong>: Injects the environment variable <code>MESSAGE="Web Server: A"</code>.</li>
<li><strong>Ports</strong>: Maps container port <code>5001</code> to host port <code>5001</code>.</li>
</ul>
</li>
<li><strong>Web-B</strong>: Similar setup as Web-A, but configured to respond with "Web Server: B".<ul>
<li><strong>Environment</strong>: Sets <code>MESSAGE="Web Server: B"</code>.</li>
<li><strong>Ports</strong>: Maps container port <code>5002</code> to host port <code>5002</code>.</li>
</ul>
</li>
</ul>
<h3 id="nagios">Nagios</h3>
<ul>
<li><strong>Image</strong>: Uses the official <code>jasonrivers/nagios:latest</code> image for monitoring.</li>
<li><strong>Purpose</strong>: Provides a monitoring interface to observe the health and performance of services.</li>
<li><strong>Configuration</strong>:<ul>
<li>Mounts configuration files and scripts into the container:<ul>
<li><code>/opt/nagios/etc</code>: Maps the <code>etc</code> directory for Nagios configurations.</li>
<li><code>/opt/nagios/libexec</code>: Maps the <code>libexec</code> directory for custom plugins.</li>
</ul>
</li>
<li><strong>Ports</strong>: Exposes Nagios on host port <code>8080</code>.</li>
<li><strong>Environment</strong>: Sets <code>NAGIOS_TIMEZONE=UTC</code> for consistent timestamps.</li>
<li><strong>Restart Policy</strong>: Always restarts to ensure availability.</li>
</ul>
</li>
</ul>
<h3 id="mkdocs">MkDocs</h3>
<ul>
<li><strong>Image</strong>: Uses the official <code>squidfunk/mkdocs-material</code> image.</li>
<li><strong>Purpose</strong>: Serves project documentation locally during development.</li>
<li><strong>Configuration</strong>:<ul>
<li>Maps the local <code>mkdocs</code> directory into the container for live edits.</li>
<li><strong>Ports</strong>: Serves documentation on host port <code>8000</code>.</li>
</ul>
</li>
</ul>
<h3 id="network">Network</h3>
<ul>
<li><strong>Name</strong>: <code>expensify_network</code> (custom bridge network).</li>
<li><strong>Purpose</strong>: Ensures seamless communication between all containers.</li>
</ul>
<hr />
<h2 id="challenges-faced">Challenges Faced</h2>
<details class="danger">
<summary>Challenges Encountered</summary>
<ul>
<li><strong>Dependency Management</strong>: Ensuring all services start in the correct order.</li>
<li><strong>Port Conflicts</strong>: Avoiding collisions when mapping multiple container ports to the host.</li>
<li><strong>Configuration Complexity</strong>: Managing multiple configuration files and ensuring they work seamlessly.</li>
</ul>
</details>
<p>How I Solved Them</p>
<ul>
<li><strong>Dependency Management</strong>: Used the <code>depends_on</code> key in <code>docker-compose.yml</code> to specify service dependencies.</li>
<li><strong>Port Conflicts</strong>: Assigned unique ports for each service and documented mappings clearly.</li>
<li><strong>Configuration Complexity</strong>: Organized configuration files into well-defined directories for easier maintenance.</li>
</ul>
<hr />
<h2 id="lessons-learned">Lessons Learned</h2>
<details class="quote">
<summary>Key Takeaways</summary>
<ul>
<li>Docker Compose simplifies service orchestration but requires clear documentation for maintainability.</li>
<li>Using environment variables allows dynamic configurations and easier scaling.</li>
<li>Consistent naming conventions and well-structured directories significantly improve project clarity.</li>
</ul>
</details>
<hr />
<div class="admonition question">
<p class="admonition-title">Future Enhancements</p>
<ul>
<li><strong>Scaling</strong>: Investigate Docker Swarm or Kubernetes for scaling the architecture to handle higher traffic.</li>
<li><strong>Monitoring</strong>: Enhance monitoring with Prometheus and Grafana for detailed insights.</li>
<li><strong>Security</strong>: Implement SSL/TLS termination at HAProxy for secure communication.</li>
</ul>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.code.select", "content.code.annotate"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>